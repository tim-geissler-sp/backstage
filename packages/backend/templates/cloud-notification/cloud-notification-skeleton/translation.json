/**
 * Copyright (C) 2022 SailPoint Technologies, Inc.  All rights reserved.
 *
 * Translation file for Cloud-notification (Hermes)
 **/

{
  "version": 1,

  "oneSky": {

    // (Optional) Define a set of path variables that may be re-used within the file upload &
    // download paths below. The name will be enclosed within curly braces and replaced with the
    // value.
    "pathVariables": {
      "baseDir": "notification-template/template-manager/src/main/resources"
    },

    // (Required) The list of files to be operated on for OneSky.
    "files": [{
      // (Required) The OneSky project id where the translation files are located.
      "projectId": "154494",

      // (Required) The OneSky name of this file to be translated.
      "name": "hermes-template-messages.properties",

      // (Optional) When the download parameter is provided then all languages which are
      // 100% complete will be downloaded. If they are not complete then the language
      // will be skipped from downloading. The download path is relative to this configuration
      // file. The following variables are available in addition to any custom pathVariables
      // defined above:
      // {language} - The OneSky language code
      // {javaLocale} - The language as a Java Locale (basicaly convert dashes to underscores).
      "download": "{baseDir}/hermes-template-messages_{javaLocale}.properties",

      // (Optional) When the upload parameter is provided then the source file will always
      // be uploaded to OneSky. The upload path is relative to this configuration file. Any
      // custom pathVariables defined above will be available.
      "upload": "{baseDir}/hermes-template-messages.properties",

      // {Optional} orders translations for languages that are over 50% complete
      "order": 50,

      // (Optional) The file format adapter to use for reading and writing this file. All
      // files must have a format specified either via the defaultFormat parameter or
      // this format parameter. The following formats are supported:
      //  - JavaProperties, Plain old Java properties file.
      //  - JsonWithComments, Plain old JSON but with comments.
      //  - ExtJSMessageBundle, IdentityNow's ExtJS message bundle format.
      "format": "JavaProperties"
    }]
  },

  // (Optional) When the github parameter is defined then translation changes will be posted
  // as a pull request in github. If a pull request allready exists then the branch will be
  // updated with the latest changes. This section defines how and where the pull request will
  // be created.
  "github": {

    "org": "sailpoint", // (Required) The github org.
    "repo": "cloud-notification", // (Required) The github repo
    "branch": "feature/i18n", // (Required) The branch to commit updates.

    // (Required) The commit message when commiting changes. If Jira integration is used then
    // the commit message *must* start with "{jiraKey}:". The tool uses this format to detect
    // the Jira issue from existing pull request.
    "commit": "{jiraKey}: [i18n] cloud-notification updated message bundles.",

    // (Required) The pull request title and description. If Jira integration is used then the
    // pull request title *must* start with "{jiraKey:".
    "pullRequest": {
      "title": "{jiraKey}: [i18n] cloud-notification updated message bundles.",
      "description": "New translated message bundles from OneSky. This issue is automatically generated by the 'sailpointTranslate' command\n\n{jiraUrl}"
    }
  },

  // (Optional) When the jira parameter is defined then a new Jira issue will be created when posting
  // pull requests. If an open pull request allready exists, then that same issue & pull request will
  // simply be updated. An issue is only created when a new pull request is created.
  "jira": {

    // (Required) The fields to create the jira issue with. The Jira API requires that all issues
    // have at least a project.key, issuetype.name, and a summary. Beyond that individual Jira
    // projects may define additional fields as required.
    "fields": {
      "project": {
        "key": "PLTCORE"
      },
      "issuetype": {
        "name": "Story"
      },
      "labels": [
        "Translations"
      ],
      "summary": "[i18n] cloud-notification updated message bundles",
      "description": "New translated message bundles from OneSky. This issue is automatically generated by the 'sailpointTranslate' command",
      "customfield_16500": {"value": "Hermes"}, //This is the Releasable Component field
      "customfield_17328": {"value": "Low"} //This is the Deploy Risk field
    }
  },

  "hooks": {
    "postOneSky": "
    /* Don't fail when a shell command fails. */
    config.fatal = false;
    mv(
    'api-client-common/src/main/resources/api-client-common-errors_zh_CN.properties',
    'api-client-common/src/main/resources/api-client-common-errors_zh.properties'
    );
    "
  }
}
