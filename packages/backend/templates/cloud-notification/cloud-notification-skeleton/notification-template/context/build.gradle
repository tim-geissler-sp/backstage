jacocoTestCoverageVerification {
	violationRules {
		rule {
			limit {
				counter = 'COMPLEXITY'
				minimum = 0.81
			}
		}
	}
}

dependencies {
	api(platform("com.sailpoint:atlas-platform:$project.ATLAS_VERSION"))

	compile(project(":notification-common"))
	compile(project(":notification-template:common"))
	compile("com.sailpoint:atlas-api-common")
	compile("com.sailpoint:saas-kafka-topics:$project.KAFKA_TOPICS_VERSION")

	testCompile("com.sailpoint:atlas-test")
}

task copyNativeDeps(type: Copy) {
    from(configurations.compile + configurations.testCompile) {
        include '*.dll'
        include '*.dylib'
        include '*.so'
    }
    into 'build/libs'
}

test {
    dependsOn copyNativeDeps
    systemProperty "java.library.path", 'build/libs'
}
