sourceSets {
    test {
        resources {
            srcDir file("src/test/java")
            exclude "**/*.java"
        }
    }
}

configurations {
    testCompile.exclude group: 'org.slf4j', module: 'slf4j-log4j12'
}

dependencies {
    api(platform("com.sailpoint:atlas-platform:$project.ATLAS_VERSION"))

    testCompile("junit:junit")
    testCompile("com.sailpoint:cloud-api-test:$project.API_TEST_VERSION")
}

test {
    enabled = project.hasProperty("apiTest") ? project.getProperty("apiTest") == "true" : false

    systemProperties =  System.properties
    systemProperties["user.dir"] = workingDir

    systemProperty "karate.options", System.properties.getProperty("karate.options")
    systemProperty "karate.env", System.properties.getProperty("karate.env")

    outputs.upToDateWhen { false }
}
version 'unspecified'
